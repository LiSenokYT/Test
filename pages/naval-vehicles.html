<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ—Ä—Å–∫–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ | –ê—Ä—Ö–∏–≤ –ë—Ä–æ–Ω–∏</title>
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/catalog.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="logo">
                    <span class="logo-icon">üõ°Ô∏è</span>
                    <span class="logo-text">–ê–†–•–ò–í –ë–†–û–ù–ò</span>
                </div>
                
                <ul class="nav-links">
                    <li><a href="../index.html" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li><a href="ground-vehicles.html" class="nav-link">–ù–∞–∑–µ–º–Ω–∞—è</a></li>
                    <li><a href="air-vehicles.html" class="nav-link">–í–æ–∑–¥—É—à–Ω–∞—è</a></li>
                    <li><a href="naval-vehicles.html" class="nav-link active">–ú–æ—Ä—Å–∫–∞—è</a></li>
                </ul>
                
                <div class="nav-actions">
                    <div class="search-box">
                        <input type="text" placeholder="–ü–æ–∏—Å–∫ —Ç–µ—Ö–Ω–∏–∫–∏..." class="search-input">
                        <button type="button" class="search-btn">üîç</button>
                    </div>
                    <button type="button" class="mobile-menu-btn">‚ò∞</button>
                </div>
            </div>
        </nav>
    </header>

    <section class="page-header">
        <div class="container">
            <div class="breadcrumbs">
                <a href="../index.html">–ì–ª–∞–≤–Ω–∞—è</a>
                <span class="breadcrumb-separator">/</span>
                <span class="current">–ú–æ—Ä—Å–∫–∞—è —Ç–µ—Ö–Ω–∏–∫–∞</span>
            </div>
            
            <div class="page-header-content">
                <h1 class="page-title">–ú–æ—Ä—Å–∫–∞—è —Ç–µ—Ö–Ω–∏–∫–∞</h1>
                <p class="page-subtitle">–ê–≤–∏–∞–Ω–æ—Å—Ü—ã, –∫—Ä–µ–π—Å–µ—Ä—ã, –ø–æ–¥–≤–æ–¥–Ω—ã–µ –ª–æ–¥–∫–∏ –∏ –¥—Ä—É–≥–∏–µ –∫–æ—Ä–∞–±–ª–∏ –≤–æ–µ–Ω–Ω–æ-–º–æ—Ä—Å–∫–æ–≥–æ —Ñ–ª–æ—Ç–∞</p>
                
                <div class="quick-stats">
                    <div class="quick-stat">
                        <span class="stat-number">15</span>
                        <span class="stat-label">–µ–¥–∏–Ω–∏—Ü —Ç–µ—Ö–Ω–∏–∫–∏</span>
                    </div>
                    <div class="quick-stat">
                        <span class="stat-number">6</span>
                        <span class="stat-label">—Å—Ç—Ä–∞–Ω</span>
                    </div>
                    <div class="quick-stat">
                        <span class="stat-number">8</span>
                        <span class="stat-label">–∫–∞—Ç–µ–≥–æ—Ä–∏–π</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="filters-section">
        <div class="container">
            <div class="filters-header">
                <h2>
                    <span>‚õ¥Ô∏è</span>
                    –§–∏–ª—å—Ç—Ä—ã –º–æ—Ä—Å–∫–æ–π —Ç–µ—Ö–Ω–∏–∫–∏
                </h2>
                <div class="filters-actions">
                    <button type="button" class="filters-toggle" id="filtersToggle">
                        <span>–ü–æ–∫–∞–∑–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</span>
                        <span class="toggle-icon">‚ñº</span>
                    </button>
                    <button type="button" class="clear-filters" id="clearFilters">–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ</button>
                </div>
            </div>
            
            <div class="filters-container" id="filtersContainer">
                <div class="filters-grid">
                    <div class="filter-group">
                        <label class="filter-label">–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é</label>
                        <div class="search-filter">
                            <input type="text" id="searchFilter" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö—É–∑–Ω–µ—Ü–æ–≤, Yamato...">
                            <button type="button" class="search-filter-btn">üîç</button>
                        </div>
                    </div>

                    <div class="filter-group">
                        <label class="filter-label">–¢–∏–ø –∫–æ—Ä–∞–±–ª—è</label>
                        <div class="filter-chips" id="typeFilter">
                            <button type="button" class="filter-chip active" data-type="all">–í—Å–µ</button>
                            <button type="button" class="filter-chip" data-type="aircraft-carrier">–ê–≤–∏–∞–Ω–æ—Å–µ—Ü</button>
                            <button type="button" class="filter-chip" data-type="cruiser">–ö—Ä–µ–π—Å–µ—Ä</button>
                            <button type="button" class="filter-chip" data-type="destroyer">–≠—Å–º–∏–Ω–µ—Ü</button>
                            <button type="button" class="filter-chip" data-type="frigate">–§—Ä–µ–≥–∞—Ç</button>
                            <button type="button" class="filter-chip" data-type="corvette">–ö–æ—Ä–≤–µ—Ç</button>
                            <button type="button" class="filter-chip" data-type="submarine">–ü–æ–¥–ª–æ–¥–∫–∞</button>
                            <button type="button" class="filter-chip" data-type="landing-ship">–î–µ—Å–∞–Ω—Ç–Ω—ã–π –∫–æ—Ä–∞–±–ª—å</button>
                            <button type="button" class="filter-chip" data-type="patrol-ship">–°—Ç–æ—Ä–æ–∂–µ–≤–æ–π –∫–æ—Ä–∞–±–ª—å</button>
                        </div>
                    </div>

                    <div class="filter-group">
                        <label class="filter-label">–°—Ç—Ä–∞–Ω–∞</label>
                        <select class="filter-select" id="countryFilter">
                            <option value="all">–í—Å–µ —Å—Ç—Ä–∞–Ω—ã</option>
                            <option value="russia">–†–æ—Å—Å–∏—è/–°–°–°–†</option>
                            <option value="usa">–°–®–ê</option>
                            <option value="uk">–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è</option>
                            <option value="france">–§—Ä–∞–Ω—Ü–∏—è</option>
                            <option value="china">–ö–∏—Ç–∞–π</option>
                            <option value="japan">–Ø–ø–æ–Ω–∏—è</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label class="filter-label">–ü–µ—Ä–∏–æ–¥</label>
                        <select class="filter-select" id="eraFilter">
                            <option value="all">–í—Å–µ –ø–µ—Ä–∏–æ–¥—ã</option>
                            <option value="ww2">–í—Ç–æ—Ä–∞—è –º–∏—Ä–æ–≤–∞—è</option>
                            <option value="cold-war">–•–æ–ª–æ–¥–Ω–∞—è –≤–æ–π–Ω–∞</option>
                            <option value="modern">–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label class="filter-label">–ì–æ–¥—ã —Å–ª—É–∂–±—ã</label>
                        <div class="range-filter">
                            <div class="range-inputs">
                                <input type="number" id="yearFrom" placeholder="1940" min="1900" max="2030">
                                <span class="range-separator">‚Äî</span>
                                <input type="number" id="yearTo" placeholder="2024" min="1900" max="2030">
                            </div>
                        </div>
                    </div>

                    <div class="filter-group">
                        <button type="button" class="advanced-filters-toggle" id="advancedToggle">
                            <span>–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã</span>
                            <span class="toggle-icon">‚ñº</span>
                        </button>
                    </div>

                    <div class="advanced-filters" id="advancedFilters">
                        <div class="filter-group">
                            <label class="filter-label">–í–æ–¥–æ–∏–∑–º–µ—â–µ–Ω–∏–µ</label>
                            <select class="filter-select" id="displacementFilter">
                                <option value="all">–õ—é–±–æ–µ</option>
                                <option value="small">–ú–∞–ª—ã–µ (–¥–æ 5,000 —Ç)</option>
                                <option value="medium">–°—Ä–µ–¥–Ω–∏–µ (5,000-15,000 —Ç)</option>
                                <option value="large">–ö—Ä—É–ø–Ω—ã–µ (15,000-50,000 —Ç)</option>
                                <option value="super-large">–û—á–µ–Ω—å –∫—Ä—É–ø–Ω—ã–µ (50,000+ —Ç)</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label class="filter-label">–≠–∫–∏–ø–∞–∂</label>
                            <select class="filter-select" id="crewFilter">
                                <option value="all">–õ—é–±–æ–π</option>
                                <option value="small">–ú–∞–ª—ã–π (–¥–æ 100 —á–µ–ª)</option>
                                <option value="medium">–°—Ä–µ–¥–Ω–∏–π (100-500 —á–µ–ª)</option>
                                <option value="large">–ö—Ä—É–ø–Ω—ã–π (500+ —á–µ–ª)</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label class="filter-label">–°–∫–æ—Ä–æ—Å—Ç—å</label>
                            <select class="filter-select" id="speedFilter">
                                <option value="all">–õ—é–±–∞—è</option>
                                <option value="slow">–ú–∞–ª–∞—è (–¥–æ 25 —É–∑–ª–æ–≤)</option>
                                <option value="medium">–°—Ä–µ–¥–Ω—è—è (25-35 —É–∑–ª–æ–≤)</option>
                                <option value="fast">–í—ã—Å–æ–∫–∞—è (35+ —É–∑–ª–æ–≤)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="active-filters" id="activeFilters">
                </div>
            </div>
        </div>
    </section>

    <section class="results-section">
        <div class="container">
            <div class="results-header">
                <div class="results-info">
                    <h3>–ù–∞–π–¥–µ–Ω–æ –µ–¥–∏–Ω–∏—Ü: <span id="resultsCount">15</span></h3>
                    <div class="sort-controls">
                        <label>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</label>
                        <select id="sortSelect">
                            <option value="name">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–ê-–Ø)</option>
                            <option value="name-desc">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–Ø-–ê)</option>
                            <option value="year">–ü–æ –≥–æ–¥—É (—Å—Ç–∞—Ä—ã–µ)</option>
                            <option value="year-desc">–ü–æ –≥–æ–¥—É (–Ω–æ–≤—ã–µ)</option>
                            <option value="displacement">–ü–æ –≤–æ–¥–æ–∏–∑–º. (–º–∞–ª—ã–µ)</option>
                            <option value="displacement-desc">–ü–æ –≤–æ–¥–æ–∏–∑–º. (–∫—Ä—É–ø–Ω—ã–µ)</option>
                        </select>
                    </div>
                </div>
                
                <div class="view-controls">
                    <button type="button" class="view-btn active" data-view="grid" title="–°–µ—Ç–∫–∞">
                        ‚ñ¶
                    </button>
                    <button type="button" class="view-btn" data-view="list" title="–°–ø–∏—Å–æ–∫">
                        ‚ò∞
                    </button>
                </div>
            </div>

            <div class="vehicles-grid" id="vehiclesGrid">
                <!-- –ú–æ—Ä—Å–∫–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
            </div>

            <div class="loading-state" id="loadingState">
                <div class="loading-spinner"></div>
                <p>–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ—Ä—Å–∫–æ–π —Ç–µ—Ö–Ω–∏–∫–∏...</p>
            </div>

            <div class="no-results" id="noResults" style="display: none;">
                <div class="no-results-icon">‚õ¥Ô∏è</div>
                <h3>–ö–æ—Ä–∞–±–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏</p>
                <button type="button" class="cta-button primary" id="resetSearch">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
            </div>

            <div class="load-more-container">
                <button type="button" class="load-more-btn" id="loadMore">–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë</button>
            </div>
        </div>
    </section>

    <div class="modal" id="quickViewModal">
        <div class="modal-content">
            <button type="button" class="modal-close" id="modalClose">‚úï</button>
            <div class="modal-body" id="modalBody">
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="logo">
                        <span class="logo-icon">üõ°Ô∏è</span>
                        <span class="logo-text">–ê–†–•–ò–í –ë–†–û–ù–ò</span>
                    </div>
                    <p class="footer-description">
                        –≠–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è –≤–æ–µ–Ω–Ω–æ–π —Ç–µ—Ö–Ω–∏–∫–∏ –æ—Ç –¥—Ä–µ–≤–Ω–æ—Å—Ç–∏ –¥–æ –Ω–∞—à–∏—Ö –¥–Ω–µ–π. 
                        –ò—Å—Ç–æ—Ä–∏—è, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ details.
                    </p>
                </div>
                
                <div class="footer-section">
                    <h4>–†–∞–∑–¥–µ–ª—ã</h4>
                    <ul class="footer-links">
                        <li><a href="../index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li><a href="ground-vehicles.html">–ù–∞–∑–µ–º–Ω–∞—è</a></li>
                        <li><a href="air-vehicles.html">–í–æ–∑–¥—É—à–Ω–∞—è</a></li>
                        <li><a href="naval-vehicles.html">–ú–æ—Ä—Å–∫–∞—è</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h4>
                    <ul class="footer-links">
                        <li><a href="#">–ê–≤–∏–∞–Ω–æ—Å—Ü—ã</a></li>
                        <li><a href="#">–ö—Ä–µ–π—Å–µ—Ä—ã</a></li>
                        <li><a href="#">–ü–æ–¥–ª–æ–¥–∫–∏</a></li>
                        <li><a href="#">–≠—Å–º–∏–Ω—Ü—ã</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
                    <div class="social-links">
                        <a href="#" class="social-link">GitHub</a>
                        <a href="#" class="social-link">Telegram</a>
                        <a href="#" class="social-link">Email</a>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 –ê—Ä—Ö–∏–≤ –ë—Ä–æ–Ω–∏. –§–∞–Ω–∞—Ç—Å–∫–∏–π –ø—Ä–æ–µ–∫—Ç. –ù–µ –ø—Ä–µ—Å–ª–µ–¥—É–µ—Ç –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ü–µ–ª–µ–π.</p>
            </div>
        </div>
    </footer>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –∑–∞–≥—Ä—É–∑—á–∏–∫ –¥–∞–Ω–Ω—ã—Ö -->
    <script src="../src/data/data-loader.js"></script>
    <!-- –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã -->
    <script src="../src/js/utils.js"></script>
    
    <script>
    // NavalCatalog –∫–ª–∞—Å—Å –¥–ª—è –º–æ—Ä—Å–∫–æ–π —Ç–µ—Ö–Ω–∏–∫–∏
    class NavalCatalog {
        constructor() {
            this.vehicles = [];
            this.filteredVehicles = [];
            this.currentPage = 1;
            this.itemsPerPage = 12;
            this.filters = {
                search: '',
                type: 'all',
                country: 'all',
                era: 'all',
                yearFrom: '',
                yearTo: '',
                displacement: 'all',
                crew: 'all',
                speed: 'all'
            };
            this.sortBy = 'name';
            this.viewMode = 'grid';
            this.filtersVisible = false;

            this.init();
        }

        async init() {
            await this.loadVehicles();
            this.bindEvents();
            this.applyFilters();
            this.toggleFilters && this.toggleFilters(false);
        }

        async loadVehicles() {
            try {
                const loader = window.dataLoader;
                this.vehicles = await (loader ? loader.loadVehicles('naval') : []);
                if (!Array.isArray(this.vehicles)) { this.vehicles = []; }
                this.filteredVehicles = this.vehicles.slice();
                this.displayVehicles();
            } catch (e) {
                console.error('Error loading naval vehicles', e);
                this.vehicles = [];
                this.filteredVehicles = [];
            }
        }

        applyFilters() {
            this.currentPage = 1;
            this.filteredVehicles = this.vehicles.filter(v => this.matchesFilters(v));
            this.sortVehicles();
            this.updateActiveFilters && this.updateActiveFilters();
            this.displayVehicles();
        }

        sortVehicles() {
            this.filteredVehicles.sort((a, b) => {
                switch (this.sortBy) {
                    case 'name': return a.name.localeCompare(b.name);
                    case 'name-desc': return b.name.localeCompare(a.name);
                    case 'year': return (a.year || 0) - (b.year || 0);
                    case 'year-desc': return (b.year || 0) - (a.year || 0);
                    case 'displacement': return (a.specs && a.specs.displacement || 0) - (b.specs && b.specs.displacement || 0);
                    case 'displacement-desc': return (b.specs && b.specs.displacement || 0) - (a.specs && a.specs.displacement || 0);
                    default: return 0;
                }
            });
        }

        bindEvents() {
            // Toggle filters
            document.getElementById('filtersToggle').addEventListener('click', () => {
                this.toggleFilters();
            });

            // Search filter
            document.getElementById('searchFilter').addEventListener('input', (e) => {
                this.filters.search = e.target.value;
                this.applyFilters();
            });

            // Type filter chips
            document.querySelectorAll('.filter-chip').forEach(chip => {
                chip.addEventListener('click', (e) => {
                    document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
                    e.target.classList.add('active');
                    this.filters.type = e.target.dataset.type;
                    this.applyFilters();
                });
            });

            // Select filters
            ['country', 'era'].forEach(filter => {
                const element = document.getElementById(filter + 'Filter');
                if (element) {
                    element.addEventListener('change', (e) => {
                        this.filters[filter] = e.target.value;
                        this.applyFilters();
                    });
                }
            });

            // Sort control
            const sortSelect = document.getElementById('sortSelect');
            if (sortSelect) {
                sortSelect.addEventListener('change', (e) => {
                    this.sortBy = e.target.value;
                    this.applyFilters();
                });
            }

            // Clear filters
            document.getElementById('clearFilters').addEventListener('click', () => {
                this.clearFilters();
            });

            // Advanced filters toggle
            const advancedToggle = document.getElementById('advancedToggle');
            if (advancedToggle) {
                advancedToggle.addEventListener('click', (e) => {
                    e.target.classList.toggle('active');
                    document.getElementById('advancedFilters').classList.toggle('active');
                });
            }

            // Advanced filters
            ['displacement', 'crew', 'speed'].forEach(filter => {
                const element = document.getElementById(filter + 'Filter');
                if (element) {
                    element.addEventListener('change', (e) => {
                        this.filters[filter] = e.target.value;
                        this.applyFilters();
                    });
                }
            });

            // Year range filters
            ['yearFrom', 'yearTo'].forEach(filter => {
                const element = document.getElementById(filter);
                if (element) {
                    element.addEventListener('input', (e) => {
                        this.filters[filter] = e.target.value;
                        this.applyFilters();
                    });
                }
            });

            // View controls
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    this.viewMode = e.target.dataset.view;
                    this.updateViewMode();
                });
            });

            // Modal close
            const modalClose = document.getElementById('modalClose');
            if (modalClose) {
                modalClose.addEventListener('click', () => {
                    this.closeModal();
                });
            }

            // Close modal on backdrop click
            const modal = document.getElementById('quickViewModal');
            if (modal) {
                modal.addEventListener('click', (e) => {
                    if (e.target.id === 'quickViewModal') {
                        this.closeModal();
                    }
                });
            }
        }

        clearFilters() {
            this.filters = {
                search: '',
                type: 'all',
                country: 'all',
                era: 'all',
                yearFrom: '',
                yearTo: '',
                displacement: 'all',
                crew: 'all',
                speed: 'all'
            };
            
            this.sortBy = 'name'; // ‚Üê –î–û–ë–ê–í–õ–Ø–ï–ú –°–ë–†–û–° –°–û–†–¢–ò–†–û–í–ö–ò

            document.getElementById('searchFilter').value = '';
            document.querySelectorAll('.filter-chip').forEach(chip => {
                chip.classList.remove('active');
                if (chip.dataset.type === 'all') chip.classList.add('active');
            });
            
            ['country', 'era'].forEach(filter => {
                const element = document.getElementById(filter + 'Filter');
                if (element) { element.value = 'all'; }
            });
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–µ–ª–µ–∫—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
            const sortSelect = document.getElementById('sortSelect');
            if (sortSelect) { sortSelect.value = 'name'; }

            this.applyFilters();
        }

        // Quick View —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
        bindVehicleCardEvents() {
            document.querySelectorAll('.quick-view-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const vehicleId = e.target.dataset.vehicleId;
                    this.showQuickView(vehicleId);
                });
            });

            document.querySelectorAll('.vehicle-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    if (!e.target.classList.contains('vehicle-btn')) {
                        const vehicleId = card.dataset.vehicleId;
                        // –ü–ï–†–ï–•–û–î–ò–ú –ù–ê –î–ï–¢–ê–õ–¨–ù–£–Æ –°–¢–†–ê–ù–ò–¶–£
                        window.location.href = `naval-details.html?id=${vehicleId}`;
                    }
                });
            });
        }

        showQuickView(vehicleId) {
            const vehicle = this.vehicles.find(v => v.id === vehicleId);
            if (!vehicle) return;

            const modalBody = document.getElementById('modalBody');
            if (!modalBody) return;

            modalBody.innerHTML = this.createQuickViewContent(vehicle);

            // –ù–∞–≤–µ—à–∏–≤–∞–µ–º –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
            const closeBtn = modalBody.querySelector('.close-modal-btn');
            if (closeBtn) closeBtn.addEventListener('click', () => this.closeModal());

            document.getElementById('quickViewModal').classList.add('active');
        }

        createQuickViewContent(vehicle) {
            const typeLabel = this.getTypeLabel(vehicle.category);
            const countryLabel = this.getCountryLabel(vehicle.country);

            return `
                <div class="quick-view">
                    <div class="quick-view-image">
                        <div class="vehicle-image-placeholder large">
                            ${escapeHtml(vehicle.name)}
                        </div>
                    </div>
                    <div class="quick-view-content">
                        <h2>${escapeHtml(vehicle.name)}</h2>
                        <div class="quick-view-meta">
                            <span class="meta-item">${countryLabel}</span>
                            <span class="meta-item">${vehicle.year} –≥–æ–¥</span>
                            <span class="meta-item">${typeLabel}</span>
                        </div>
                        
                        <div class="quick-view-specs">
                            <div class="spec-row">
                                <span class="spec-name">–í–æ–¥–æ–∏–∑–º–µ—â–µ–Ω–∏–µ:</span>
                                <span class="spec-value">${vehicle.specs.displacement} —Ç–æ–Ω–Ω</span>
                            </div>
                            <div class="spec-row">
                                <span class="spec-name">–î–ª–∏–Ω–∞:</span>
                                <span class="spec-value">${vehicle.specs.length} –º–µ—Ç—Ä–æ–≤</span>
                            </div>
                            <div class="spec-row">
                                <span class="spec-name">–≠–∫–∏–ø–∞–∂:</span>
                                <span class="spec-value">${vehicle.specs.crew} —á–µ–ª–æ–≤–µ–∫</span>
                            </div>
                            <div class="spec-row">
                                <span class="spec-name">–ú–∞–∫—Å. —Å–∫–æ—Ä–æ—Å—Ç—å:</span>
                                <span class="spec-value">${vehicle.specs.speed} —É–∑–ª–æ–≤</span>
                            </div>
                            <div class="spec-row">
                                <span class="spec-name">–í–æ–æ—Ä—É–∂–µ–Ω–∏–µ:</span>
                                <span class="spec-value">${escapeHtml(vehicle.specs.armament)}</span>
                            </div>
                            ${vehicle.specs.aircraft ? `
                            <div class="spec-row">
                                <span class="spec-name">–ê–≤–∏–∞–≥—Ä—É–ø–ø–∞:</span>
                                <span class="spec-value">${escapeHtml(vehicle.specs.aircraft)}</span>
                            </div>
                            ` : ''}
                        </div>
                        
                        <p class="quick-view-description">${escapeHtml(vehicle.description)}</p>
                        
                        <div class="quick-view-actions">
                            <a href="naval-details.html?id=${encodeURIComponent(vehicle.id)}" class="vehicle-btn">
                                –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
                            </a>
                            <button type="button" class="vehicle-btn secondary close-modal-btn">
                                –ó–∞–∫—Ä—ã—Ç—å
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        closeModal() {
            document.getElementById('quickViewModal').classList.remove('active');
        }

        matchesFilters(vehicle) {
            // Search filter
            if (this.filters.search && !vehicle.name.toLowerCase().includes(this.filters.search.toLowerCase())) {
                return false;
            }

            // Type filter
            if (this.filters.type !== 'all' && vehicle.category !== this.filters.type) {
                return false;
            }

            // Country filter
            if (this.filters.country !== 'all' && vehicle.country !== this.filters.country) {
                return false;
            }

            // Era filter
            if (this.filters.era !== 'all' && vehicle.era !== this.filters.era) {
                return false;
            }

            // Year range filter
            if (this.filters.yearFrom && vehicle.year < parseInt(this.filters.yearFrom)) {
                return false;
            }
            if (this.filters.yearTo && vehicle.year > parseInt(this.filters.yearTo)) {
                return false;
            }

            // Displacement filter
            if (this.filters.displacement !== 'all') {
                const displacement = vehicle.specs.displacement;
                switch (this.filters.displacement) {
                    case 'small': if (displacement > 5000) return false; break;
                    case 'medium': if (displacement <= 5000 || displacement > 15000) return false; break;
                    case 'large': if (displacement <= 15000 || displacement > 50000) return false; break;
                    case 'super-large': if (displacement <= 50000) return false; break;
                }
            }

            // Crew filter
            if (this.filters.crew !== 'all') {
                const crew = vehicle.specs.crew;
                switch (this.filters.crew) {
                    case 'small': if (crew > 100) return false; break;
                    case 'medium': if (crew <= 100 || crew > 500) return false; break;
                    case 'large': if (crew <= 500) return false; break;
                }
            }

            // Speed filter
            if (this.filters.speed !== 'all') {
                const speed = vehicle.specs.speed;
                switch (this.filters.speed) {
                    case 'slow': if (speed > 25) return false; break;
                    case 'medium': if (speed <= 25 || speed > 35) return false; break;
                    case 'fast': if (speed <= 35) return false; break;
                }
            }

            return true;
        }

        updateViewMode() {
            const grid = document.getElementById('vehiclesGrid');
            if (grid) {
                grid.className = `vehicles-grid ${this.viewMode}-view`;
            }
        }

        createVehicleCard(vehicle) {
            const typeLabel = this.getTypeLabel(vehicle.category);
            const countryLabel = this.getCountryLabel(vehicle.country);
            const vId = encodeURIComponent(vehicle.id);
            const name = escapeHtml(vehicle.name);
            const desc = escapeHtml(vehicle.description);
            const displacement = escapeHtml(vehicle.specs.displacement);
            const length = escapeHtml(vehicle.specs.length);
            const speed = escapeHtml(vehicle.specs.speed);
            const crew = escapeHtml(vehicle.specs.crew);

            return `
                <div class="vehicle-card" data-vehicle-id="${vId}">
                    <div class="vehicle-badge">${escapeHtml(countryLabel)}</div>
                    <div class="vehicle-image">
                        <div class="vehicle-image-placeholder">
                            ${name}
                        </div>
                    </div>
                    <div class="vehicle-content">
                        <div class="vehicle-header">
                            <h3 class="vehicle-title">${name}</h3>
                        </div>
                        <div class="vehicle-country">${escapeHtml(countryLabel)} ‚Ä¢ ${escapeHtml(vehicle.year)}–≥</div>
                        <div class="vehicle-type">${escapeHtml(typeLabel)}</div>
                        
                        <div class="vehicle-specs">
                            <div class="vehicle-spec">
                                <span class="spec-label">–í–æ–¥–æ–∏–∑–º.</span>
                                <span class="spec-value">${displacement}—Ç</span>
                            </div>
                            <div class="vehicle-spec">
                                <span class="spec-label">–î–ª–∏–Ω–∞</span>
                                <span class="spec-value">${length}–º</span>
                            </div>
                            <div class="vehicle-spec">
                                <span class="spec-label">–°–∫–æ—Ä–æ—Å—Ç—å</span>
                                <span class="spec-value">${speed} —É–∑–ª–æ–≤</span>
                            </div>
                            <div class="vehicle-spec">
                                <span class="spec-label">–≠–∫–∏–ø–∞–∂</span>
                                <span class="spec-value">${crew}</span>
                            </div>
                        </div>
                        
                        <p class="vehicle-description">${desc}</p>
                        
                        <div class="vehicle-actions">
                            <button type="button" class="vehicle-btn quick-view-btn" data-vehicle-id="${vId}">
                                –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
                            </button>
                            <a href="naval-details.html?id=${vId}" class="vehicle-btn secondary">
                                –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                            </a>
                        </div>
                    </div>
                </div>
            `;
        }

        displayVehicles() {
            const grid = document.getElementById('vehiclesGrid');
            const resultsCount = document.getElementById('resultsCount');
            const noResults = document.getElementById('noResults');
            const loadingState = document.getElementById('loadingState');

            if (loadingState) loadingState.style.display = 'none';

            if (this.filteredVehicles.length === 0) {
                grid.style.display = 'none';
                if (noResults) noResults.style.display = 'block';
                if (resultsCount) resultsCount.textContent = '0';
                return;
            }

            if (noResults) noResults.style.display = 'none';
            grid.style.display = 'grid';
            if (resultsCount) resultsCount.textContent = this.filteredVehicles.length;

            grid.innerHTML = this.filteredVehicles.map(vehicle => this.createVehicleCard(vehicle)).join('');
            
            // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏—è –∫ –Ω–æ–≤—ã–º –∫–∞—Ä—Ç–æ—á–∫–∞–º
            this.bindVehicleCardEvents();
        }

        // Helper methods
        getTypeLabel(type) {
            const types = {
                'aircraft-carrier': '–ê–≤–∏–∞–Ω–æ—Å–µ—Ü',
                'battleship': '–õ–∏–Ω–∫–æ—Ä',
                'cruiser': '–ö—Ä–µ–π—Å–µ—Ä',
                'destroyer': '–≠—Å–º–∏–Ω–µ—Ü',
                'frigate': '–§—Ä–µ–≥–∞—Ç',
                'corvette': '–ö–æ—Ä–≤–µ—Ç',
                'submarine': '–ü–æ–¥–ª–æ–¥–∫–∞',
                'landing-ship': '–î–µ—Å–∞–Ω—Ç–Ω—ã–π –∫–æ—Ä–∞–±–ª—å',
                'patrol-ship': '–°—Ç–æ—Ä–æ–∂–µ–≤–æ–π –∫–æ—Ä–∞–±–ª—å'
            };
            return types[type] || type;
        }

        getCountryLabel(country) {
            const countries = {
                'russia': '–†–æ—Å—Å–∏—è/–°–°–°–†',
                'usa': '–°–®–ê',
                'china': '–ö–∏—Ç–∞–π',
                'japan': '–Ø–ø–æ–Ω–∏—è',
                'uk': '–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è',
                'france': '–§—Ä–∞–Ω—Ü–∏—è'
            };
            return countries[country] || country;
        }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞
    document.addEventListener('DOMContentLoaded', () => {
        window.catalog = new NavalCatalog();
    });
    </script>
</body>
</html>
